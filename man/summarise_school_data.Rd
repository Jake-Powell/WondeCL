% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/school_summary.R
\name{summarise_school_data}
\alias{summarise_school_data}
\title{Summarise school-level data extracted from Wonde API}
\usage{
summarise_school_data(
  schools,
  WondeData,
  year_codes_target = c("7", "Year 7", "07", "Year 07", "Y7", "Yr7", "Yr 7"),
  subject_keywords = c("Maths", "Mathematics", "Ma", "Mathematic",
    "Mathematics (Assessment+)")
)
}
\arguments{
\item{schools}{Data frame containing school metadata (must include at least
\code{URN}, \code{id}, and \code{name} columns).}

\item{WondeData}{Named list of school data extracts (as returned from
\code{get_secondary_school_student_data()}).}

\item{year_codes_target}{Character vector of year codes used to identify the
target year group (default includes multiple Year 7 code variations).}

\item{subject_keywords}{Character vector of subject name patterns to identify
relevant subjects (default identifies Maths-related names).}
}
\value{
A data frame containing school-level summaries including:
\itemize{
  \item \code{year_code_values}: available year codes in the extract
  \item \code{HasTargetYear}: whether the target year group is present
  \item \code{target_year_subjects}: subjects available for the target year
  \item \code{GetSubjectByCode}: detection of target subject by subject code
  \item \code{class_desc_target_year}: available class descriptions for the target year
  \item \code{GetSubjectByClassDescription}: detection of subject by class description
  \item \code{total_students}: total number of students in the school
  \item \code{total_target_year_students}: total number of students in the target year group
  \item Logical indicators for which data parts were successfully extracted
    (e.g. \code{student}, \code{subjects}, \code{staff}, etc.)
}
}
\description{
Processes a list of Wonde school extracts and produces a summary table showing
year group availability, subject detection, student counts, and data part coverage
for each school. Designed to work with data returned by
\code{get_secondary_school_student_data()}.
}
\details{
The function checks the structure of each school's data extract, detects the
presence of the user-specified year group and subjects, and identifies whether
relevant Wonde endpoints were available. It is robust to missing or incomplete
data and merges all derived summaries back into the supplied \code{schools}
data frame.
}
\examples{
\dontshow{if (FALSE) (if (getRversion() >= "3.4") withAutoprint else force)(\{ # examplesIf}
summary_df <- summarise_school_data(
  schools = schools,
  WondeData = secondary_data_raw,
  year_codes_target = c("7", "Year 7"),
  subject_keywords = c("Maths", "Mathematics")
)

head(summary_df)
\dontshow{\}) # examplesIf}
}
