% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/OME_ids.R
\name{add_OME_id}
\alias{add_OME_id}
\title{Add Internal OME IDs to Class List}
\usage{
add_OME_id(class_list, available_ids, person_type = "student")
}
\arguments{
\item{class_list}{A data frame containing the columns:
"EstablishmentID", "SchoolType", and "OME_ID".
The `EstablishmentID` must be exactly 3 digits.}

\item{available_ids}{A character vector of available 5-digit suffixes
(e.g., c("00001", "00002", "00003")) to be used for new IDs.}

\item{person_type}{Either "student" or "teacher". Determines the first digit of the ID
(1 for students, 2 for teachers).}
}
\value{
A list containing:
\itemize{
  \item `class_list`: The input data frame with the "OME_ID" column updated
        to include new IDs for individuals who were missing one.
  \item `new_ids`: A data frame containing only the rows where new OME_IDs were assigned,
        including key identifying columns.
}
}
\description{
Assigns new internal OME IDs to individuals (students or teachers) in a class list
who do not already have one. The OME ID is constructed using the format:
\preformatted{
  PersonType + SchoolType + EstablishmentID + 5-digit unique numeric suffix
}

The resulting OME_ID always has a total length of 10 characters.

where:
\itemize{
  \item `PersonType` = 1 for students, 2 for teachers.
  \item `SchoolType` = numeric school type (1, 2, 3, or 4).
  \item `EstablishmentID` = a 3-digit identifier for the school.
  \item The final 5-digit suffix comes from the supplied `available_ids` vector.
}

Only individuals missing an OME_ID (NA or empty string) are assigned a new ID.
}
\examples{
\dontrun{
class_list <- data.frame(
  EstablishmentID = c("123", "123", "456", "456"),
  SchoolType = c(1, 1, 2, 4),
  OME_ID = c(NA, "", "21245600001", ""),
  stringsAsFactors = FALSE
)

available_ids <- sprintf("\%05d", 1:100)

# Add new IDs for students
result <- add_OME_id(class_list, available_ids, person_type = "student")
result$class_list
result$new_ids

# Add new IDs for teachers
add_OME_id(class_list, available_ids, person_type = "teacher")
}

}
