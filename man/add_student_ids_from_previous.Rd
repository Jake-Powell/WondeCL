% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/student_matching.R
\name{add_student_ids_from_previous}
\alias{add_student_ids_from_previous}
\title{Add Student_IDs (and original data) from a previous class list}
\usage{
add_student_ids_from_previous(
  new_class_list,
  old_class_list,
  FN_column = "Pupil First Name",
  LN_column = "Pupil Last Name",
  DoB_column = "DoB",
  UPN_column = "UPN",
  URN_column = "URN",
  Student_ID_column = "Student_ID",
  verbose = FALSE,
  fuzzy_match = TRUE,
  max_dist = 2,
  method = "osa"
)
}
\arguments{
\item{new_class_list}{Data frame of the current class list.}

\item{old_class_list}{Data frame of the previous class list (must contain \code{Student_ID}).}

\item{FN_column}{Column name for pupil first names (default: "Pupil First Name").}

\item{LN_column}{Column name for pupil last names (default: "Pupil Last Name").}

\item{DoB_column}{Column name for pupil date of birth (default: "DoB").}

\item{UPN_column}{Column name for pupil UPNs (default: "UPN").}

\item{URN_column}{Column name for school URNs (default: "URN").}

\item{Student_ID_column}{Column name for student IDs (default: "Student_ID").}

\item{verbose}{Logical; if TRUE, prints progress information.}

\item{fuzzy_match}{Logical; if TRUE, performs fuzzy name matching using
\code{OMEManage::match_person_to_data()} for remaining unmatched students.}

\item{max_dist}{Maximum allowed edit distance for fuzzy name matching (default: 2).}

\item{method}{Method passed to \code{stringdist::stringdist()} (default: "osa").}
}
\value{
The updated new_class_list data frame with:
\itemize{
  \item Student_ID filled where possible from the previous dataset
  \item Match Method column ("UPN", "EXACT", "FUZZY MATCH", etc.)
  \item Old data columns: Old Pupil First Name, Old Pupil Last Name, and Old DoB (if available)
}
}
\description{
Reuses existing \code{Student_ID} values from a previous class list by matching
students in a new class list. Matching is first attempted by UPN (for rows
with a valid UPN), then by name (first and last name) restricted to the same
school (by URN). If both datasets have date of birth information, mismatches
are flagged by appending "DoB not matched" to the match method description.
}
