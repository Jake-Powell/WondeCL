% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/school_summary.R
\name{summarise_small_classes}
\alias{summarise_small_classes}
\title{Summarise Small Classes by School}
\usage{
summarise_small_classes(
  class_list,
  school_name_col = "School name",
  urn_col = "URN",
  class_col = "Class Name",
  pupil_col = "Pupil First Name",
  unique_id_col = NULL,
  threshold = 3
)
}
\arguments{
\item{class_list}{A data frame containing at least the columns:
`"School name"`, `"URN"`, `"Class Name"`, and `"Pupil First Name"`.}

\item{school_name_col}{Column name for school names. Default: `"School name"`.}

\item{urn_col}{Column name for school URNs. Default: `"URN"`.}

\item{class_col}{Column name for class names. Default: `"Class Name"`.}

\item{pupil_col}{Column name for pupil names (used only if no unique ID column is provided).
Default: `"Pupil First Name"`.}

\item{unique_id_col}{(Optional) Column name uniquely identifying students (e.g., `"UPN"` or `"OME_ID"`).
If provided and present in `class_list`, counts of students per class will use distinct values
in this column. If `NULL` (default), each row is assumed to represent one student.}

\item{threshold}{Numeric. The maximum class size considered "small". Default: `3`.}
}
\value{
A tibble summarising, for each school:
\describe{
  \item{School name}{School name.}
  \item{URN}{Unique reference number for the school.}
  \item{TotalClasses}{Number of classes in the school.}
  \item{SmallClasses}{Number of classes with ≤ `threshold` students.}
  \item{StudentsInSmallClasses}{Total students in those small classes.}
  \item{SmallClassSizes}{Comma-separated sizes of all small classes.}
  \item{TotalStudents}{Total number of students across all classes.}
  \item{PercentInSmallClasses}{Percentage of students in small classes.}
}
}
\description{
Groups a class list by school and summarises the occurrence of small classes,
defined as classes with a number of students less than or equal to `threshold`.
For each school, the function reports:
\itemize{
  \item The total number of classes in the school.
  \item The number of classes with ≤ `threshold` students.
  \item The total number of students in those small classes.
  \item The sizes of all small classes (comma-separated).
  \item The percentage of all students in the school who are in small classes.
}
}
\examples{
\dontrun{
summarise_small_classes(class_list_df)
summarise_small_classes(class_list_df, unique_id_col = "UPN", threshold = 5)
}

}
