% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/class_list_functions.R
\name{reduce_to_best_teacher}
\alias{reduce_to_best_teacher}
\title{Reduce duplicated student-teacher records to best (main) teacher}
\usage{
reduce_to_best_teacher(data)
}
\arguments{
\item{data}{A data frame containing at least the columns `StudentId` and
`MainTeacher`. The `MainTeacher` column should be logical (`TRUE` for
the main teacher, `FALSE` otherwise).}
}
\value{
A data frame reduced to one record per student, preferring main teacher
entries where available.
}
\description{
Filters a class list data frame to keep only one record per student,
prioritizing those associated with the main teacher. If multiple records
exist for the same student, the record marked with `MainTeacher == TRUE`
is retained. Students without a main teacher entry are kept once using
their first available record.
}
\details{
This function performs the following steps:
\enumerate{
  \item Replaces any missing (`NA`) values in `MainTeacher` with `FALSE`.
  \item Splits the dataset into two subsets: one for main teachers and one
        for other teachers.
  \item For each student, keeps only the main teacher record if available;
        otherwise keeps the first non-main-teacher record.
  \item Warns if the total number of unique students decreases after
        filtering (which may indicate inconsistent or malformed data).
}

The function is typically used after joining student-class-teacher data
and before producing summary class lists with functions such as
`produce_class_lists()`.
}
\examples{
\dontrun{
reduced <- reduce_to_best_teacher(class_list_df)
}

}
