% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/class_list.R
\name{extract_class_list_classes_groups}
\alias{extract_class_list_classes_groups}
\title{Extract class lists for schools using class or registration group structures}
\usage{
extract_class_list_classes_groups(
  WondeData,
  schools,
  yearCodes,
  verbose = TRUE
)
}
\arguments{
\item{WondeData}{A named list of school datasets, typically generated by Wonde
data retrieval functions (e.g., \code{\link{get_primary_school_student_data}}). Each
element represents one school's full dataset.}

\item{schools}{A data frame containing metadata for the schools, including at least
the columns:
\describe{
  \item{id}{Wonde school ID (matches names of \code{WondeData})}
  \item{urn}{Unique Reference Number}
  \item{classes}{Indicator or description of whether class data are available}
  \item{registration_groups}{Indicator or description of whether registration group data are available}
}}

\item{yearCodes}{Character vector of year codes identifying the students to include
(e.g. \code{c("YR", "R")} for Reception, \code{"Y1"} for Year 1, etc.).}

\item{verbose}{Logical (default = TRUE). Whether to print progress messages and
warnings for missing or inconsistent data.}
}
\value{
A data frame containing class list information for the selected year
  code(s) across all schools, with columns:
\describe{
  \item{SchoolId}{Wonde school ID}
  \item{SchoolName}{School name}
  \item{EstablishmentNumber}{Establishment number from Wonde}
  \item{URN}{Unique Reference Number}
  \item{UPN}{Unique pupil number (if available)}
  \item{StudentId}{Wonde student ID}
  \item{StudentFirstName}{Student forename}
  \item{StudentLastName}{Student surname}
  \item{DoB}{Student date of birth (YYYY-MM-DD)}
  \item{ClassId}{Class or registration group ID}
  \item{ClassName}{Class or group name/code}
  \item{TeacherId}{Teacher’s Wonde ID}
  \item{TeacherForeName}{Teacher’s forename}
  \item{TeacherSurName}{Teacher’s surname}
  \item{TeacherName}{Combined teacher name}
}
}
\description{
This function creates a detailed class list for schools where teaching groups
are organised by *classes* or *registration groups* rather than by subjects.
It compiles student, class, and teacher information for the specified year
code(s) across all schools included in the provided Wonde dataset list.
}
\details{
The function supports two data structures:
\itemize{
  \item \strong{Class structure:} where students are linked via \code{students_classes}.
  \item \strong{Registration group structure:} where students are linked via
        \code{students_group} with \code{groups.data__type == "REGISTRATION"}.
}


The function first attempts to build the class list using the \code{students_classes}
dataset. If no valid class data are available for a school, it falls back to
using registration group data from \code{students_group}. Warnings are issued
for schools or students that cannot be matched across datasets.
}
\examples{
\dontrun{
# Extract Reception class lists across all schools using class/group structures
reception_classes <- extract_class_list_classes_groups(
  WondeData = school_data_raw,
  schools = schools_metadata,
  yearCodes = c("R", "YR")
)

# Extract Year 1 class lists
y1_classes <- extract_class_list_classes_groups(
  WondeData = school_data_raw,
  schools = schools_metadata,
  yearCodes = "Y1"
)
}

}
\seealso{
\code{\link{extract_class_list}} for the version that uses subject-based structures
(typically for secondary schools).
}
