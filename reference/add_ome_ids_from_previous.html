<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add OME_IDs (and original data) from a previous class list — add_ome_ids_from_previous • WondeCL</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add OME_IDs (and original data) from a previous class list — add_ome_ids_from_previous"><meta name="description" content='Reuses existing OME_ID values from a previous class list by matching
students in a new class list. Matching is first attempted by UPN (for rows
with a valid UPN), then by name (first and last name) restricted to the same
school (by URN). If both datasets have date of birth information, mismatches
are flagged by appending "DoB not matched" to the match method description.'><meta property="og:description" content='Reuses existing OME_ID values from a previous class list by matching
students in a new class list. Matching is first attempted by UPN (for rows
with a valid UPN), then by name (first and last name) restricted to the same
school (by URN). If both datasets have date of birth information, mismatches
are flagged by appending "DoB not matched" to the match method description.'><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">WondeCL</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Jake-Powell/WondeCL/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Add OME_IDs (and original data) from a previous class list</h1>
      <small class="dont-index">Source: <a href="https://github.com/Jake-Powell/WondeCL/blob/master/R/student_matching.R" class="external-link"><code>R/student_matching.R</code></a></small>
      <div class="d-none name"><code>add_ome_ids_from_previous.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Reuses existing <code>OME_ID</code> values from a previous class list by matching
students in a new class list. Matching is first attempted by UPN (for rows
with a valid UPN), then by name (first and last name) restricted to the same
school (by URN). If both datasets have date of birth information, mismatches
are flagged by appending "DoB not matched" to the match method description.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_ome_ids_from_previous</span><span class="op">(</span></span>
<span>  <span class="va">new_class_list</span>,</span>
<span>  <span class="va">old_class_list</span>,</span>
<span>  FN_column <span class="op">=</span> <span class="st">"Pupil First Name"</span>,</span>
<span>  LN_column <span class="op">=</span> <span class="st">"Pupil Last Name"</span>,</span>
<span>  DoB_column <span class="op">=</span> <span class="st">"DoB"</span>,</span>
<span>  UPN_column <span class="op">=</span> <span class="st">"UPN"</span>,</span>
<span>  URN_column <span class="op">=</span> <span class="st">"URN"</span>,</span>
<span>  OME_ID_column <span class="op">=</span> <span class="st">"OME_ID"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  fuzzy_match <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  max_dist <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"osa"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-new-class-list">new_class_list<a class="anchor" aria-label="anchor" href="#arg-new-class-list"></a></dt>
<dd><p>Data frame of the current class list.</p></dd>


<dt id="arg-old-class-list">old_class_list<a class="anchor" aria-label="anchor" href="#arg-old-class-list"></a></dt>
<dd><p>Data frame of the previous class list (must contain <code>OME_ID</code>).</p></dd>


<dt id="arg-fn-column">FN_column<a class="anchor" aria-label="anchor" href="#arg-fn-column"></a></dt>
<dd><p>Column name for pupil first names (default: "Pupil First Name").</p></dd>


<dt id="arg-ln-column">LN_column<a class="anchor" aria-label="anchor" href="#arg-ln-column"></a></dt>
<dd><p>Column name for pupil last names (default: "Pupil Last Name").</p></dd>


<dt id="arg-dob-column">DoB_column<a class="anchor" aria-label="anchor" href="#arg-dob-column"></a></dt>
<dd><p>Column name for pupil date of birth (default: "DoB").</p></dd>


<dt id="arg-upn-column">UPN_column<a class="anchor" aria-label="anchor" href="#arg-upn-column"></a></dt>
<dd><p>Column name for pupil UPNs (default: "UPN").</p></dd>


<dt id="arg-urn-column">URN_column<a class="anchor" aria-label="anchor" href="#arg-urn-column"></a></dt>
<dd><p>Column name for school URNs (default: "URN").</p></dd>


<dt id="arg-ome-id-column">OME_ID_column<a class="anchor" aria-label="anchor" href="#arg-ome-id-column"></a></dt>
<dd><p>Column name for OME IDs (default: "OME_ID").</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical; if TRUE, prints progress information.</p></dd>


<dt id="arg-fuzzy-match">fuzzy_match<a class="anchor" aria-label="anchor" href="#arg-fuzzy-match"></a></dt>
<dd><p>Logical; if TRUE, performs fuzzy name matching using
OMEManage::match_person_to_data() for remaining unmatched students.</p></dd>


<dt id="arg-max-dist">max_dist<a class="anchor" aria-label="anchor" href="#arg-max-dist"></a></dt>
<dd><p>Maximum allowed edit distance for fuzzy name matching (default: 2).</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Method passed to stringdist::stringdist() (default: "osa").</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The updated new_class_list data frame with:</p><ul><li><p>OME_ID filled where possible from the previous dataset</p></li>
<li><p>Match Method column ("UPN", "EXACT", "FUZZY MATCH", etc.)</p></li>
<li><p>Old data columns: Old Pupil First Name, Old Pupil Last Name, and Old DoB (if available)</p></li>
</ul></div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jake Powell.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

